<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trash Taste Catchup</title>
    <link rel="icon" href="icons/logo.svg">
    <link rel="stylesheet" href="style.css">
    <script defer src="main.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
</head>
<body>
    <nav>
        <a href="/index.html"><img class="original" src="icons/logo.svg" width="55px" style="padding-top: 4px;"></a>
        <ul>
            <a href="/videos.html"><li>Videos</li></a>
            <a href="/streams.html"><li>Streams</li></a>
            <a href="/tweets.html"><li>Tweet Feed</li></a>
        </ul>
        <button onclick="modeSwitch()">
            <img id="modeicon" class="towhite" src="icons/moon.svg" width="25px">
        </button>
    </nav>

    <main>
      <div class="container">
        <div class="ttcontainer">
          <a href="https://www.youtube.com/c/TrashTaste"><h2>Trash Taste</h2></a>
          <iframe class="latestVideoEmbed" vnum='0' cid="UCcmxOGYGF51T1XsqQLewGtQ" width="600" height="340" frameborder="0" allowfullscreen></iframe>
          <iframe style="padding-top: 70px;" class="latestVideoEmbed" vnum='1' cid="UCcmxOGYGF51T1XsqQLewGtQ" width="600" height="340" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="ttcontainer" style="align-items: center">
          <a style="width: 77px" href="https://www.youtube.com/channel/UCPsZ_0SkFdi551iYTG04R2g"><h2 style="width: 77px">Conner</h2></a>
          <iframe class="latestVideoEmbed" vnum='0' cid="UCPsZ_0SkFdi551iYTG04R2g" width="600" height="340" frameborder="0" allowfullscreen></iframe>
          <a style="width: 50px;" href="https://www.youtube.com/user/TheAn1meMan"><h2 style="width: 50px">Joey</h2></a>
          <iframe class="latestVideoEmbed" vnum='0' cid="UC3ETCazlHenpXEsrEJH-k5A" width="600" height="340" frameborder="0" allowfullscreen></iframe>
          <a style="width: 65px;" href="https://www.youtube.com/user/gigguk"><h2 style="width: 65px">Garnt</h2></a>
          <iframe class="latestVideoEmbed" vnum='0' cid="UC7dF9qfBMXrSlaaFFDvV_Yg" width="600" height="340" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="ttcontainer">
          <a class="afterdark" href="https://www.youtube.com/channel/UCKaN3mt53ATqRjzalb2ALFQ"><h2 style="width: 250px;">Trash Taste After Dark</h2></a>
          <iframe class="latestVideoEmbed" vnum='0' cid="UCKaN3mt53ATqRjzalb2ALFQ" width="600" height="340" frameborder="0" allowfullscreen></iframe>
        </div>
      </div>
    </main>
    
    <script>
      var reqURL = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent("https://www.youtube.com/feeds/videos.xml?channel_id=");
      function loadVideo(iframe) {
        $.getJSON(reqURL + iframe.getAttribute('cid'),
          function(data) {
            var videoNumber = (iframe.getAttribute('vnum') ? Number(iframe.getAttribute('vnum')) : 0);
            console.log(videoNumber);
            var link = data.items[videoNumber].link;
            id = link.substr(link.indexOf("=") + 1);
            iframe.setAttribute("src", "https://youtube.com/embed/" + id + "?controls=0&autoplay=0");
          }
        );
      }
      var iframes = document.getElementsByClassName('latestVideoEmbed');
      for (var i = 0, len = iframes.length; i < len; i++) {
        loadVideo(iframes[i]);
      }
    </script>
</body>
</html>